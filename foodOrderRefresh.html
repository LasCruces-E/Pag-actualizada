<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <title>Ordenes</title>
</head>
<body>
    <div class="ordenes container" id="wrapper">

    </div>
    
    <div class="container agregar mt-5">
        <button type="button" class="agregar-pedido btn btn-primary">Agregar pedido</button>
    </div>

    <div class="container guardar mt-5">
        <button type="button" class="guardar btn btn-primary">Guardar pedidos</button>
    </div>

    <script>
        $(document).ready(function(){
            var x;
            var articulo;
            var numero;
            var $contenido = $('#wrapper');
            var pedido = '<div class="card mt-5 p-2">            <div class="row d-flex flex-row align-items-baseline">                <div class="col-8">                    <input class="form-control nombre-input" type="text" placeholder="Nombre del cliente o mesa" aria-label="default input example">                </div>                <div class="col-2">                    <button type="submit" class="nombre btn btn-primary btn-sm">ACEPTAR</button>                </div>                <div class="col-6 d-flex flex-row mt-2">                    <p>Pedido de:</p>                    <p class="nombre ms-2 fw-bold"></p>                </div>     <div class="col-6 d-flex flex-row mt-2"> <button type="button" class="eliminar btn btn-danger"><i class="fas fa-trash"></i></button> </div>       </div>            <div class="row">                <div class="col">                    <p class="fw-bold">Nombre del producto</p>                </div>                <div class="col">                    <p class="fw-bold">Costo</p>                </div>                <div class="col">                    <p class="fw-bold">Cantidad</p>                </div>            </div>            <div class="row border-top align-items-center">                <div class="col">                    <h6>Orden de barbacoa de borrego</h6>                </div>                <div class="col">                    <p class="costo">150</p>                </div>                <div class="col d-flex align-items-baseline">                    <button type="button" class="buttonmenos btn btn-primary btn-sm">-</button>                    <p class="cantidad ms-3 me-3 1">0</p>                    <button type="button" class="buttonmas btn btn-primary btn-sm">+</button>                </div>            </div>            <div class="row border-top align-items-center">                <div class="col">                    <h6>Orden de barbacoa de res</h6>                </div>                <div class="col">                    <p class="costo">120</p>                </div>                <div class="col d-flex align-items-baseline">                    <button type="button" class="buttonmenos btn btn-primary btn-sm">-</button>                    <p class="cantidad ms-3 me-3 2">0</p>                    <button type="button" class="buttonmas btn btn-primary btn-sm">+</button>                </div>            </div>            <div class="row border-top align-items-center">                <div class="col">                    <h6>Orden de carnitas</h6>                </div>                <div class="col">                    <p class="costo">100</p>                </div>                <div class="col d-flex align-items-baseline">                    <button type="button" class="buttonmenos btn btn-primary btn-sm">-</button>                    <p class="cantidad ms-3 me-3 3">0</p>                    <button type="button" class="buttonmas btn btn-primary btn-sm">+</button>                </div>            </div>            <div class="row border-top align-items-center">                <div class="col">                    <h6>Pizza</h6>                </div>                <div class="col">                    <p class="costo">240</p>                </div>                <div class="col d-flex align-items-baseline">                    <button type="button" class="buttonmenos btn btn-primary btn-sm">-</button>                    <p class="cantidad ms-3 me-3 4">0</p>                    <button type="button" class="buttonmas btn btn-primary btn-sm">+</button>                </div>            </div>            <div class="row border-top align-items-center">                <div class="col">                    <h6>Gordas de horno salada</h6>                </div>                <div class="col">                    <p class="costo">20</p>                </div>                <div class="col d-flex align-items-baseline">                    <button type="button" class="buttonmenos btn btn-primary btn-sm">-</button>                    <p class="cantidad ms-3 me-3 5">0</p>                    <button type="button" class="buttonmas btn btn-primary btn-sm">+</button>                </div>            </div>            <div class="row border-top align-items-center">                <div class="col">                    <h6>Gordas de horno dulce</h6>                </div>                <div class="col">                    <p class="costo">20</p>                </div>                <div class="col d-flex align-items-baseline">                    <button type="button" class="buttonmenos btn btn-primary btn-sm">-</button>                    <p class="cantidad ms-3 me-3 6">0</p>                    <button type="button" class="buttonmas btn btn-primary btn-sm">+</button>                </div>            </div>            <div class="row border-top align-items-center">                <div class="col">                    <h6>Atole de arroz</h6>                </div>                <div class="col">                    <p class="costo">20</p>                </div>                <div class="col d-flex align-items-baseline">                    <button type="button" class="buttonmenos btn btn-primary btn-sm">-</button>                    <p class="cantidad ms-3 me-3 7">0</p>                    <button type="button" class="buttonmas btn btn-primary btn-sm">+</button>                </div>            </div>            <div class="row border-top align-items-center">                <div class="col">                    <h6>Gorditas</h6>                </div>                <div class="col">                    <p class="costo">15</p>                </div>                <div class="col d-flex align-items-baseline">                    <button type="button" class="buttonmenos btn btn-primary btn-sm">-</button>                    <p class="cantidad ms-3 me-3 8">0</p>                    <button type="button" class="buttonmas btn btn-primary btn-sm">+</button>                </div>            </div>            <div class="row border-top align-items-center">                <div class="col">                    <h6>Quesadilla sencilla</h6>                </div>                <div class="col">                    <p class="costo">35</p>                </div>                <div class="col d-flex align-items-baseline">                    <button type="button" class="buttonmenos btn btn-primary btn-sm">-</button>                    <p class="cantidad ms-3 me-3 9">0</p>                    <button type="button" class="buttonmas btn btn-primary btn-sm">+</button>                </div>            </div>            <div class="row border-top align-items-center">                <div class="col">                    <h6>Quesadilla con guisado</h6>                </div>                <div class="col">                    <p class="costo">35</p>                </div>                <div class="col d-flex align-items-baseline">                    <button type="button" class="buttonmenos btn btn-primary btn-sm">-</button>                    <p class="cantidad ms-3 me-3 10">0</p>                    <button type="button" class="buttonmas btn btn-primary btn-sm">+</button>                </div>            </div>            <div class="row border-top align-items-center">                <div class="col">                    <h6>Quesadilla de arrachera</h6>                </div>                <div class="col">                    <p class="costo">45</p>                </div>                <div class="col d-flex align-items-baseline">                    <button type="button" class="buttonmenos btn btn-primary btn-sm">-</button>                    <p class="cantidad ms-3 me-3 11">0</p>                    <button type="button" class="buttonmas btn btn-primary btn-sm">+</button>                </div>            </div>            <div class="row border-top align-items-center">                <div class="col">                    <h6>Sopes sencillos</h6>                </div>                <div class="col">                    <p class="costo">15</p>                </div>                <div class="col d-flex align-items-baseline">                    <button type="button" class="buttonmenos btn btn-primary btn-sm">-</button>                    <p class="cantidad ms-3 me-3 12">0</p>                    <button type="button" class="buttonmas btn btn-primary btn-sm">+</button>                </div>            </div>            <div class="row border-top align-items-center">                <div class="col">                    <h6>Sopes con guisado</h6>                </div>                <div class="col">                    <p class="costo">20</p>                </div>                <div class="col d-flex align-items-baseline">                    <button type="button" class="buttonmenos btn btn-primary btn-sm">-</button>                    <p class="cantidad ms-3 me-3 13">0</p>                    <button type="button" class="buttonmas btn btn-primary btn-sm">+</button>                </div>            </div>            <div class="row border-top align-items-center">                <div class="col">                    <h6>Menudo chico</h6>                </div>                <div class="col">                    <p class="costo">80</p>                </div>                <div class="col d-flex align-items-baseline">                    <button type="button" class="buttonmenos btn btn-primary btn-sm">-</button>                    <p class="cantidad ms-3 me-3 14">0</p>                    <button type="button" class="buttonmas btn btn-primary btn-sm">+</button>                </div>            </div>            <div class="row border-top align-items-center">                <div class="col">                    <h6>Menudo grande</h6>                </div>                <div class="col">                    <p class="costo">90</p>                </div>                <div class="col d-flex align-items-baseline">                    <button type="button" class="buttonmenos btn btn-primary btn-sm">-</button>                    <p class="cantidad ms-3 me-3 15">0</p>                    <button type="button" class="buttonmas btn btn-primary btn-sm">+</button>                </div>            </div>            <div class="row border-top align-items-center">                <div class="col">                    <h6>Chilaquiles</h6>                </div>                <div class="col">                    <p class="costo">90</p>                </div>                <div class="col d-flex align-items-baseline">                    <button type="button" class="buttonmenos btn btn-primary btn-sm">-</button>                    <p class="cantidad ms-3 me-3 16">0</p>                    <button type="button" class="buttonmas btn btn-primary btn-sm">+</button>                </div>            </div>            <div class="row border-top align-items-center">                <div class="col">                    <h6>Desayuno de la casa</h6>                </div>                <div class="col">                    <p class="costo">90</p>                </div>                <div class="col d-flex align-items-baseline">                    <button type="button" class="buttonmenos btn btn-primary btn-sm">-</button>                    <p class="cantidad ms-3 me-3 17">0</p>                    <button type="button" class="buttonmas btn btn-primary btn-sm">+</button>                </div>            </div>            <div class="row border-top align-items-center">                <div class="col">                    <h6>Rebanada de pizza</h6>                </div>                <div class="col">                    <p class="costo">30</p>                </div>                <div class="col d-flex align-items-baseline">                    <button type="button" class="buttonmenos btn btn-primary btn-sm">-</button>                    <p class="cantidad ms-3 me-3 18">0</p>                    <button type="button" class="buttonmas btn btn-primary btn-sm">+</button>                </div>            </div>            <div class="row border-top align-items-center">                <div class="col">                    <h6>Cerveza</h6>                </div>                <div class="col">                    <p class="costo">25</p>                </div>                <div class="col d-flex align-items-baseline">                    <button type="button" class="buttonmenos btn btn-primary btn-sm">-</button>                    <p class="cantidad ms-3 me-3 19">0</p>                    <button type="button" class="buttonmas btn btn-primary btn-sm">+</button>                </div>            </div>            <div class="row border-top align-items-center">                <div class="col">                    <h6>Refresco</h6>                </div>                <div class="col">                    <p class="costo">20</p>                </div>                <div class="col d-flex align-items-baseline">                    <button type="button" class="buttonmenos btn btn-primary btn-sm">-</button>                    <p class="cantidad ms-3 me-3 20">0</p>                    <button type="button" class="buttonmas btn btn-primary btn-sm">+</button>                </div>            </div>            <div class="row border-top align-items-center">                <div class="col">                    <h6>Boing</h6>                </div>                <div class="col">                    <p class="costo">18</p>                </div>                <div class="col d-flex align-items-baseline">                    <button type="button" class="buttonmenos btn btn-primary btn-sm">-</button>                    <p class="cantidad ms-3 me-3 21">0</p>                    <button type="button" class="buttonmas btn btn-primary btn-sm">+</button>                </div>            </div>            <div class="row border-top align-items-center">                <div class="col">                    <h6>Café</h6>                </div>                <div class="col">                    <p class="costo">15</p>                </div>                <div class="col d-flex align-items-baseline">                    <button type="button" class="buttonmenos btn btn-primary btn-sm">-</button>                    <p class="cantidad ms-3 me-3 22">0</p>                    <button type="button" class="buttonmas btn btn-primary btn-sm">+</button>                </div>            </div>            <div class="row border-top align-items-center">                <div class="col">                    <h6>Café con refil</h6>                </div>                <div class="col">                    <p class="costo">20</p>                </div>                <div class="col d-flex align-items-baseline">                    <button type="button" class="buttonmenos btn btn-primary btn-sm">-</button>                    <p class="cantidad ms-3 me-3 23">0</p>                    <button type="button" class="buttonmas btn btn-primary btn-sm">+</button>                </div>            </div>            <div class="row border-top align-items-center mb-2 platos">                            </div>            <button type="button" class="agregar-plato btn btn-primary btn-sm w-50 m-auto mb-2">AGREGAR PLATO</button>            <div class="row border-top align-items-center">                <div class="col d-flex flex-row">                    <p> Total: </p>                     <p class="total ms-5 fw-bold"></p>                 </div>                <div class="col">                    <button type="button" class="total btn btn-primary btn-sm">CALCULAR TOTAL</button>                </div>            </div>        </div>';
            
            var plato = '<div class="col-sm-4"><label for="exampleFormControlInput1" class="form-label"><h6>Plato</h6></label><div class="articulos-seleccionados"> </div><select class="form-select" aria-label="Default select example"><option value="0" selected>Seleccionar comida</option><option value="1">Orden de barbacoa de borrego</option><option value="2">Orden de barbacoa de res</option><option value="3">Orden de carnitas</option><option value="4">Pizza pepperoni</option><option value="4">Pizza hawaina</option><option value="5">Gorda de horno salada</option><option value="6">Gorda de horno dulce</option><option value="7">Atole de arroz</option><option value="8">Gordita de frijoles</option><option value="8">Gordita de chicharrón</option><option value="8">Gordita de carne de puerco verde</option><option value="9">Quesadilla sencilla</option><option value="10">Quesadilla con guisado</option><option value="11">Quesadilla de arrachera</option><option value="12">Sope sencillo</option><option value="13">Sope con guisado</option><option value="14">Menudo chico</option><option value="15">Menudo grande</option><option value="16">Chilaquiles</option><option value="17">Desayuno de la casa</option><option value="18">Rebanada de pizza de pepperoni</option><option value="18">Rebanada de pizza de hawaina</option><option value="19">Cerveza corona</option><option value="19">Cerveza victoria</option><option value="20">Refresco Coca-Cola</option><option value="20">Refresco Fresca</option><option value="21">Boing de guayaba</option><option value="21">Boing de mango</option><option value="22">Café</option><option value="23">Café con refil</option></select></div>';

            if(localStorage.getItem("#wrapper")) { 
                $contenido.html(localStorage.getItem("#wrapper"));
            }

            $("button.guardar").click(function(){
                $contenido.append($('#wrapper').val());
                // once element HTML updated, keep it in localstorage
                localStorage.setItem("#wrapper", $contenido.html());
            });

            $("#wrapper").on("click","button.eliminar",function(){
                $(this).closest(".card").remove();
            });

            $("#wrapper").on("click","button.agregar-plato",function(){
                $(this).closest(".card").find(".platos").append(plato);
            });


            $("#wrapper").on("change",".form-select",function(){
                articulo = $(this).closest(".col-sm-4").find(".form-select option:selected").text();
                numero = $(this).closest(".col-sm-4").find(".form-select option:selected").val();
                $(this).closest(".col-sm-4").find(".articulos-seleccionados").append("<p>"+articulo+"<p>");
                x = $(this).closest(".card").find("p."+numero).text();
                x = $("p."+numero).text()
                x++;
                $(this).closest(".card").find("p."+numero).text(x);
                $(this).closest(".col-sm-4").find(".form-select").val("0");
            });

            $("button.agregar-pedido").click(function(){
                $(".ordenes").append(pedido);
            });

            $("#wrapper").on("click","button.buttonmas",function(){
                x = $(this).closest(".row").find(".cantidad").text();
                x++;
                $(this).closest(".row").find(".cantidad").text(x);
            });

            $("#wrapper").on("click","button.buttonmenos",function(){
                x = $(this).closest(".row").find(".cantidad").text();
                x--;
                $(this).closest(".row").find(".cantidad").text(x);
            });

            $("#wrapper").on("click","button.total",function(){
                var cantidad = [];
                var costo = [];
                var total = [];
                var final = 0;
                $(this).closest(".card").find('.cantidad').each(function() {
                    cantidad.push(parseInt($(this).text()));
                });
                $(this).closest(".card").find('.costo').each(function() {
                    costo.push(parseInt($(this).text()));
                });
                for (var i=0; i<cantidad.length; i++) {
                    total.push(cantidad[i]*costo[i]);
                    final+=total[i];
                }
                console.log(cantidad);
                console.log(costo);
                console.log(total);
                $(this).closest(".card").find('p.total').text(final);
            });
            
            $("#wrapper").on("click","button.nombre",function(){
                var nombre = $(this).closest(".card").find('.nombre-input').val();
                $(this).closest(".card").find('p.nombre').text(nombre);
            });
        });
    </script>
    <script src="jquery-3.5.1.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js" integrity="sha384-MrcW6ZMFYlzcLA8Nl+NtUVF0sA7MsXsP1UyJoMp4YLEuNSfAP+JcXn/tWtIaxVXM" crossorigin="anonymous"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta2/css/all.min.css" integrity="sha512-YWzhKL2whUzgiheMoBFwW8CKV4qpHQAEuvilg9FAn5VJUDwKZZxkJNuGM4XkWuk94WCrrwslk8yWNGmY1EduTA==" crossorigin="anonymous" referrerpolicy="no-referrer" />
</body>
</html>